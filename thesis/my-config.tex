% !TEX root = ./main.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% from cgc paper
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{ifthen}
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}

\newcommand{\y}{\ensuremath{\boldsymbol y}}
\newcommand{\Labels}{\ensuremath{\vec{L}}}
\newcommand{\CUT}{\ensuremath{\text{CUT}}}
\newcommand{\w}{\ensuremath{w}}
\newcommand{\MC}{\ensuremath{\text{MC}}}
\newcommand{\CC}{\ensuremath{\text{CC}}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ExpAndExplore}{Expand \& Explore}

\renewcommand{\vec}[1]{\mathbf{#1}}


\DeclareMathOperator*{\argmin}{\arg\!\min}


\usepackage{todonotes}

\usepackage{verbatim}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TIKZ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{tikz,times}
\usetikzlibrary{shapes,arrows,chains,mindmap,backgrounds,positioning,calc}


\usepackage{amsmath,bm,times}
\newcommand{\mx}[1]{\mathbf{\bm{#1}}} % Matrix command
\newcommand{\vc}[1]{\mathbf{\bm{#1}}} % Vector command

\usepackage{geometry}


\usetikzlibrary{shadows,arrows}
% Define the layers to draw the diagram
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

% Define block styles  
\tikzstyle{materia}=[draw, fill=blue!20, text width=6.0em, text centered,
  minimum height=1.5em,drop shadow]
\tikzstyle{practica} = [materia, text width=8em, minimum width=10em,
  minimum height=3em, rounded corners, drop shadow]
\tikzstyle{texto} = [above, text width=6em, text centered]
\tikzstyle{linepart} = [draw, thick, color=black!50, -latex', dashed]
\tikzstyle{line} = [draw, thick, color=black!50, -latex']
\tikzstyle{ur}=[draw, text centered, minimum height=0.01em]
 
% Define distances for bordering
\newcommand{\blockdist}{1.3}
\newcommand{\edgedist}{1.5}

\newcommand{\practica}[2]{node (p#1) [practica]
  {Pr\'actica #1\\{\scriptsize\textit{#2}}}}

% Draw background
\newcommand{\background}[5]{%
  \begin{pgfonlayer}{background}
    % Left-top corner of the background rectangle
    \path (#1.west |- #2.north)+(-0.5,0.5) node (a1) {};
    % Right-bottom corner of the background rectanle
    \path (#3.east |- #4.south)+(+0.5,-0.25) node (a2) {};
    % Draw the background
    \path[fill=yellow!20,rounded corners, draw=black!50, dashed]
      (a1) rectangle (a2);
    \path (a1.east |- a1.south)+(0.8,-0.3) node (u1)[texto]
      {\scriptsize\textit{Unidad #5}};
  \end{pgfonlayer}}

\newcommand{\transreceptor}[3]{%
  \path [linepart] (#1.east) -- node [above]
    {\scriptsize Transreceptor #2} (#3);}


%%%%%%%%%%%%%%%%%%%%%%%%%%
%                        %
% COLORS                 %   
%                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{code_green}{rgb}{0,0.6,0}
\definecolor{code_gray}{rgb}{0.5,0.5,0.5}
\definecolor{code_mauve}{rgb}{0.58,0,0.82}


\definecolor{code_lightblue}{rgb}{0.8,0.85,1}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%                        %
% SYNTAX HIGHLIGHT       %   
%                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%\newcommand{\edgedist}{1.5}

\usepackage{etex}

%\usepackage{fancyvrb}
%\fvset{tabsize=4}
\usepackage{lstautogobble}
\usepackage{listings}
\usepackage{framed}
\definecolor{lightblue}{rgb}{0.8,0.85,1}
\definecolor{shadecolor}{named}{lightblue} 


%\reserveinserts{28}

%\lstset{ %
%  backgroundcolor=\color{code_lightblue}, % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
%  basicstyle=\tiny\ttfamily,            % the size of the fonts that are used for the code
%  %breakatwhitespace=false,             % sets if automatic breaks should only happen at whitespace
%  breaklines=true,                     % sets automatic line breaking
%  captionpos=b,                        % sets the caption-position to bottom
%  commentstyle=\color{code_green},     % comment style
%  deletekeywords={...},                % if you want to delete keywords from the given language
%  escapeinside={\%*}{*)},              % if you want to add LaTeX within your code
%  extendedchars=true,                  % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
%  frame=single,                          % adds a frame around the code
%% keepspaces=true,                     % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
%  keywordstyle=\color{blue},           % keyword style
%  morekeywords={*,UInt32},             % if you want to add more keywords to the set
%  numbers=left,                        % where to put the line-numbers; possible values are (none, left, right)
%  numbersep=5pt,                       % how far the line-numbers are from the code
%  numberstyle=\tiny\color{code_mauve}, % the style that is used for the line-numbers
%  rulecolor=\color{black},             % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (%green here))
%  showspaces=false,                    % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
%  showstringspaces=false,              % underline spaces within strings only
%  showtabs=false,                      % show tabs within strings adding particular underscores
%  stepnumber=1,                        % the step between two line-numbers. If it's 1, each line will be numbered
%  stringstyle=\color{code_mauve},      % string literal style
%  tabsize=4,                           % sets default tabsize to 2 spaces
%  autogobble,
%  title=\lstname                       % show the filename of files included with \lstinputlisting; also try caption instead of title
%}


\definecolor{lightblue}{rgb}{0.8,0.85,1}

\definecolor{darkblue}{rgb}{0,0,.6}
\definecolor{darkred}{rgb}{.6,0,0}
\definecolor{darkgreen}{rgb}{0,.6,0}
\definecolor{red}{rgb}{.98,0,0}



\lstdefinelanguage{tikzuml}{language=[LaTeX]TeX, classoffset=0, morekeywords={umlbasiccomponent, umlprovidedinterface, umlrequiredinterface, umldelegateconnector, umlassemblyconnector, umlVHVassemblyconnector, umlHVHassemblyconnector, umlnote, umlusecase, umlactor, umlinherit, umlassoc, umlVHextend, umlinclude, umlstateinitial, umlbasicstate, umltrans, umlstatefinal, umlVHtrans, umlHVtrans, umldatabase, umlmulti, umlobject, umlfpart, umlcreatecall, umlclass, umlvirt, umlunicompo, umlimport, umlaggreg}, keywordstyle=\color{blue}, classoffset=1, morekeywords={umlcomponent, umlsystem, umlstate, umlseqdiag, umlcall, umlcallself, umlfragment, umlpackage}, keywordstyle=\color{red}, classoffset=0,  sensitive=true, morecomment=[l]{\%}}

\lstset{%
  captionpos=b,
  aboveskip=0pt,
  escapeinside={@}{@},
  captionpos=b,
  basicstyle=\scriptsize\ttfamily,
  commentstyle=\itshape\color{darkgreen},
  keywordstyle=\bfseries\color{darkblue},
  stringstyle=\color{darkred},
  emphstyle=\color{darkblue},
  showspaces=false,
  showtabs=false,
  columns=fixed,
  numbers=left,
  stepnumber=1,
  frame=none,
  numberstyle=\scriptsize\ttfamily,
  breaklines=true,
  showstringspaces=false,
  xleftmargin=1cm,
  autogobble,
  emph={vigra,numpy,graphs,__init__,boost,python,float,unsigned,int,np,Graph,T},
  title=\lstname                       % show the filename of files included with \lstinputlisting; also try caption instead of title
}%

\usepackage[T1]{fontenc}%

%\lstset{%
%  basicstyle=\linespread{1.5}\tiny\ttfamily,
%  numberstyle=\footnotesize\ttfamily,
%  keywordstyle=\bf\tiny\ttfamily,,
%  stringstyle=\tiny\ttfamily,
%  showspaces=false,
%  showtabs=false,
%  columns=fixed,
%  %backgroundcolor=\color{lightblue},
%  numbers=left,
%  frame=single,
%  numberstyle=\tiny,
%  autogobble,
%  title=\lstname                       % show the filename of files included with \lstinputlisting; also try caption instead of title
%}%



\usepackage{paralist} 
\usepackage{cleveref}
\usepackage{amsmath}
\usepackage[onehalfspacing]{setspace}


%\usepackage{pgfplots, pgfplotstable}
\usepackage{lipsum}


\usepackage{multibib}
\newcites{dk}{Publication}

\usepackage{amssymb}

\usepackage{nomencl}
\makenomenclature

\renewcommand{\nomname}{Notation}




\newlength\tindent
\setlength{\tindent}{\parindent}
\setlength{\parindent}{0pt}
\renewcommand{\indent}{\hspace*{\tindent}}



\usepackage{floatflt}



\usepackage{caption}
\usepackage{float}

\usepackage{tikz-uml}


\hyphenpenalty 10000000



\renewcommand*\lstlistingname{Code-snipplet}
\Crefname{listing}{Code-snipplet}{Code-snipplets}

%\newlength{\lofthumbsize}
%\setlength{\lofthumbsize}{8em}
%
%\newif\iflofimage
%\DeclareRobustCommand*{\lofimage}[2][]{%
%\iflofimage
%$\vspace*{-1.2\baselineskip}
%  \hbox to .7\columnwidth{\hss\raisebox{1\baselineskip}{\includegraphics[{width=\%lofthumbsize,keepaspectratio=true,#1}]{#2}}\hss}%
%$%
%\vspace*{0.2\baselineskip}
%\newline
%\fi
%\ignorespaces
%}
%

%\usepackage{savebox}

\usepackage{etoolbox}

\newlength{\lofthumbsize}
\setlength{\lofthumbsize}{2cm}


\newif\iflofimage
\newcommand*{\lofimage}[1][]{%
\iflofimage
    $\vcenter to \lofthumbsize{\vss%
        \hbox to \lofthumbsize{
            \hss 
            {#1}
            \hss
        }% 
    \vss}$%
    \quad
\fi
\ignorespaces
}


 \newtheorem{MyDef}{Definition}




\newcommand{\baseGraph}{ 
    G_{\text{base}} 
}
\newcommand{\baseNodes}{ 
    V_{\text{base}} 
}
\newcommand{\baseEdges}{ 
    E_{\text{base}} 
}


\newcommand{\ragGraph}{ 
    G_{\text{RAG}} 
}

\newcommand{\ragNodes}{ 
    V_{\text{RAG}} 
}
\newcommand{\ragEdges}{ 
    E_{\text{RAG}} 
}


\newcommand{\usp}{\vspace{-0.1cm}}

\newcommand{\insertref}[1]{\todo[color=green!40]{#1}}
\newcommand{\explainindetail}[1]{\todo[color=red!40]{#1}}


\newcommand{\mtd}[1]{\todo[inline]{#1}}


\newcommand{\nestedtemp}[1]{  
\tikz{\node[font=\tiny,shift={(-3.0cm,3.0cm)},fill=black!1,draw, dashed,rectangle,minimum height=0.1cm,minimum width=0.1cm] {#1}; }
}


\usepackage{slashbox} % for \backslashbox{Room}{Date}  

% \usepackage{environ}

% \NewEnviron{elaboration}{
% \par
% \begin{tikzpicture}
% \node[rectangle,minimum width=0.9\textwidth] (m) {\begin{minipage}{0.85\textwidth}\BODY\end{minipage}};
% \draw[dashed] (m.south west) rectangle (m.north east);
% \end{tikzpicture}
% }
